-- Tạo Database
CREATE DATABASE Oto_Forrent
GO
USE Oto_Forrent

-- Tạo bảng
CREATE TABLE HOPDONGTHUEXE
(
	SoHopDong VARCHAR(5) NOT NULL PRIMARY KEY,
	MaKhach VARCHAR(5) NOT NULL,
	BienSo VARCHAR(10) NOT NULL,
	NgayThue DATE NOT NULL,
	NgayTra DATE NOT NULL,
	ThoiGianThue FLOAT,
	GiaTriHopDong FLOAT,
	DatTruoc FLOAT,
	ConLai FLOAT
)

CREATE TABLE XECHOTHUE
(
	BienSo VARCHAR(10) NOT NULL PRIMARY KEY,
	SoChoNgoi INT,
	HangSanXuat VARCHAR(20),
	DonGiaThue FLOAT
)

CREATE TABLE KHACHTHUE
(
	MaKhach VARCHAR(5) NOT NULL PRIMARY KEY,
	TenKhach NVARCHAR(30) NOT NULL,
	NgaySinh DATE,
	GioiTinh NVARCHAR(4) NOT NULL,
	DiaChi NVARCHAR(30) NOT NULL,
	DienThoai CHAR(11)	
)

-- Tạo khóa ngoại
ALTER TABLE dbo.HOPDONGTHUEXE
ADD CONSTRAINT FK_BIENSO FOREIGN KEY (BienSo) REFERENCES dbo.XECHOTHUE (BienSo),
	CONSTRAINT FK_MAKHACH FOREIGN KEY (MaKhach) REFERENCES dbo.KHACHTHUE (MaKhach)

-- Nhập dữ liệu
INSERT INTO dbo.XECHOTHUE (BienSo,SoChoNgoi,HangSanXuat,DonGiaThue)
VALUES
('30F-333.33','4','Honda','20000000'),
('75A-145.19','6','Toyota','6000000'),
('51G-999.99','4','KIA','30000000'),
('30G-499.44','4','Honda','2500000'),
('30A-128.93','6','Isuzu','80000000')

INSERT INTO dbo.KHACHTHUE (MaKhach,TenKhach,GioiTinh,NgaySinh,DienThoai,DiaChi)
VALUES
('MK001',N'Lê Thị Mơ',N'Nữ','1972-09-08','0972600283',N'Nghệ An'),
('MK002',N'Hoàng Thị Thanh Thảo',N'Nữ','1990-12-21','0987654321',N'Hà Tĩnh'),
('MK003',N'Nguyễn Thế Trung',N'Nam','1993-08-12','0325885785',N'Huế'),
('MK004',N'Trần Thị Mai',N'Nữ','1999-09-12','0903252711',N'Hải Phòng'),
('MK005',N'Nguyễn Văn Thanh',N'Nam','1989-07-18','0972600283',N'Quảng Nam')

INSERT INTO dbo.HOPDONGTHUEXE (SoHopDong,MaKhach,BienSo,NgayThue,NgayTra)
VALUES
('HD001','MK001','30F-333.33', '2020-01-01', '2020-03-01'),
('HD002','MK002','75A-145.19', '2020-07-01', '2020-08-01'),
('HD003','MK003','51G-999.99', '2020-09-15', '2020-12-15'),
('HD004','MK004','30G-499.44', '2020-02-01', '2020-11-01'),
('HD005','MK005','30A-128.93', '2020-06-20', '2020-10-10')

SELECT * FROM dbo.HOPDONGTHUEXE
SELECT * FROM dbo.KHACHTHUE
SELECT * FROM dbo.XECHOTHUE
